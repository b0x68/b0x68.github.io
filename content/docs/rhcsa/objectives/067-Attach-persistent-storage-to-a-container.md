# Tech Tutorial: Manage Containers by Attaching Persistent Storage

## Introduction

In the world of containerization, managing data persistence is crucial. Unlike the ephemeral nature of containers, which lose all their data when they are stopped or deleted, persistent storage allows data to survive beyond the life of the container. This capability is essential for non-trivial applications like databases, content management systems, and any application that needs to save state over time.

This tutorial will guide you through the process of attaching persistent storage to a container. We’ll be using Docker, one of the most popular containerization platforms, as our environment. By the end of this tutorial, you will understand how to ensure that your containerized applications can maintain data across their lifecycle.

## Prerequisites

Before you begin, make sure you have the following installed:
- Docker: Ensure Docker is installed on your system. You can download it from [Docker's official website](https://www.docker.com/products/docker-desktop).

## Step-by-Step Guide

### Step 1: Create a Volume

Docker volumes are the preferred mechanism for persisting data generated by and used by Docker containers. To create a volume, run the following command in your terminal:

```bash
docker volume create myvol
```

This command creates a new volume named `myvol` that you can attach to a container.

### Step 2: Run a Container with Attached Storage

Now, let’s run a container and attach our newly created volume to it. In this example, we'll use a MySQL container to demonstrate a real-world application of persistent storage.

```bash
docker run -d \
  --name my_mysql \
  -e MYSQL_ROOT_PASSWORD=mysecret \
  -v myvol:/var/lib/mysql \
  mysql:latest
```

Here's what each part of the command does:
- `docker run -d`: Runs the container in detached mode (in the background).
- `--name my_mysql`: Names the container `my_mysql`.
- `-e MYSQL_ROOT_PASSWORD=mysecret`: Sets the root password for MySQL to `mysecret` (you should choose a secure password in a real-world scenario).
- `-v myvol:/var/lib/mysql`: Attaches the volume `myvol` to the container at `/var/lib/mysql`, which is where MySQL stores its data.
- `mysql:latest`: Specifies the image to use, in this case, the latest version of MySQL.

### Step 3: Verify the Persistence

To test that our data persists even after the container stops, let's do the following:

1. Enter the MySQL shell:
   ```bash
   docker exec -it my_mysql mysql -uroot -pmysecret
   ```

2. Create a new database:
   ```sql
   CREATE DATABASE testdb;
   ```

3. Exit the container and stop it:
   ```bash
   docker stop my_mysql
   ```

4. Restart the container:
   ```bash
   docker start my_mysql
   ```

5. Log back into MySQL and check for the database:
   ```bash
   docker exec -it my_mysql mysql -uroot -pmysecret
   SHOW DATABASES;
   ```

   You should see `testdb` listed, which confirms that our data has persisted.

## Conclusion

In this tutorial, we've seen how to attach persistent storage to a container using Docker volumes. This is a fundamental skill for managing stateful applications in containers, ensuring that important data is retained across container restarts and deployments. By leveraging Docker volumes, developers can ensure their applications run smoothly and reliably in production environments.

Remember, while this guide focused on MySQL, the same principles apply to any containerized application needing persistent storage. Always consider security, backup strategies, and performance when working with persistent data in production environments. Happy containerizing!