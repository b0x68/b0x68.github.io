<!doctype html><html lang=en-us dir=ltr><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Managing Runlevels and Boot Targets with SysVinit and Systemd # In this tutorial, we&rsquo;ll cover the key aspects of changing runlevels, boot targets, shutting down, and rebooting a system for the LPIC-1 exam. We’ll explore both SysVinit and systemd, including setting default runlevels/boot targets, alerting users, and properly terminating processes.
1. Setting the Default Runlevel or Boot Target # SysVinit # SysVinit uses the /etc/inittab file to set the default runlevel."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="http://localhost:1313/docs/lpic/lpic1/objectives/101-3/"><meta property="og:site_name" content="b0x68"><meta property="og:title" content="101.3: Change runlevels || boot targets and shutdown || reboot system"><meta property="og:description" content="Managing Runlevels and Boot Targets with SysVinit and Systemd # In this tutorial, we’ll cover the key aspects of changing runlevels, boot targets, shutting down, and rebooting a system for the LPIC-1 exam. We’ll explore both SysVinit and systemd, including setting default runlevels/boot targets, alerting users, and properly terminating processes.
1. Setting the Default Runlevel or Boot Target # SysVinit # SysVinit uses the /etc/inittab file to set the default runlevel."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><title>101.3: Change runlevels || boot targets and shutdown || reboot system | b0x68</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=canonical href=http://localhost:1313/docs/lpic/lpic1/objectives/101-3/><link rel=stylesheet href=/book.min.309b7ed028807cdb68d8d61e26d609f48369c098dbf5e4d8c0dcf4cdf49feafc.css integrity="sha256-MJt+0CiAfNto2NYeJtYJ9INpwJjb9eTYwNz0zfSf6vw=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.c9b7ffe08ad8c476e937cdc2b481369a81169201c7b3d76301aa8afdeafe946f.js integrity="sha256-ybf/4IrYxHbpN83CtIE2moEWkgHHs9djAaqK/er+lG8=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>b0x68</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><input type=checkbox id=section-e64376c6d30075ed6982dffeaea49c8a class=toggle checked>
<label for=section-e64376c6d30075ed6982dffeaea49c8a class="flex justify-between"><a href=/docs/lpic/>LPIC</a></label><ul><li><input type=checkbox id=section-d8699fbf0bad683972b13c33ade5922a class=toggle checked>
<label for=section-d8699fbf0bad683972b13c33ade5922a class="flex justify-between"><a href=/docs/lpic/lpic1/>LPIC-1</a></label><ul><li><input type=checkbox id=section-6f51b766c50b6793270b8138481655ab class=toggle checked>
<label for=section-6f51b766c50b6793270b8138481655ab class="flex justify-between"><a href=/docs/lpic/lpic1/objectives/>Objectives</a></label><ul><li><a href=/docs/lpic/lpic1/objectives/101-1/>101.1: Determining and Configuring Hardware Settings</a></li><li><a href=/docs/lpic/lpic1/objectives/101-2/>101.2: Boot the System</a></li><li><a href=/docs/lpic/lpic1/objectives/101-3/ class=active>101.3: Change runlevels || boot targets and shutdown || reboot system</a></li><li><a href=/docs/lpic/lpic1/objectives/102-1/>102.1: Designing a Disk Partitioning Scheme for Linux</a></li><li><a href=/docs/lpic/lpic1/objectives/102-2/>102.2: Installing and Configuring a Boot Manager</a></li><li><a href=/docs/lpic/lpic1/objectives/102-3/>102.3: Managing Shared Libraries</a></li></ul></li></ul></li><li class=book-section-flat><a href=/docs/lpic/lpic2/>LPIC-2</a><ul></ul></li><li class=book-section-flat><a href=/docs/lpic/lpic3-clusters/>LPIC-3CLUS</a><ul></ul></li><li class=book-section-flat><a href=/docs/lpic/lpic3-mixed/>LPIC-3ME</a><ul></ul></li><li class=book-section-flat><a href=/docs/lpic/lpic3-security/>LPIC-3SEC</a><ul></ul></li><li class=book-section-flat><a href=/docs/lpic/lpic3-virtual/>LPIC-3VIRT</a><ul></ul></li></ul></li></ul><ul><li><a href=/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>101.3: Change runlevels || boot targets and shutdown || reboot system</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#managing-runlevels-and-boot-targets-with-sysvinit-and-systemd>Managing Runlevels and Boot Targets with SysVinit and Systemd</a><ul><li><a href=#1-setting-the-default-runlevel-or-boot-target>1. Setting the Default Runlevel or Boot Target</a></li><li><a href=#2-changing-runlevelsboot-targets>2. Changing Runlevels/Boot Targets</a></li><li><a href=#3-shutting-down-and-rebooting>3. Shutting Down and Rebooting</a></li><li><a href=#4-alerting-users-before-switching-runlevelsboot-targets>4. Alerting Users Before Switching Runlevels/Boot Targets</a></li><li><a href=#5-properly-terminating-processes>5. Properly Terminating Processes</a></li><li><a href=#6-awareness-of-acpid>6. Awareness of <code>acpid</code></a></li><li><a href=#key-files-terms-and-utilities>Key Files, Terms, and Utilities</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h2 id=managing-runlevels-and-boot-targets-with-sysvinit-and-systemd>Managing Runlevels and Boot Targets with SysVinit and Systemd
<a class=anchor href=#managing-runlevels-and-boot-targets-with-sysvinit-and-systemd>#</a></h2><p>In this tutorial, we&rsquo;ll cover the key aspects of changing runlevels, boot targets, shutting down, and rebooting a system for the LPIC-1 exam. We’ll explore both SysVinit and systemd, including setting default runlevels/boot targets, alerting users, and properly terminating processes.</p><h3 id=1-setting-the-default-runlevel-or-boot-target>1. Setting the Default Runlevel or Boot Target
<a class=anchor href=#1-setting-the-default-runlevel-or-boot-target>#</a></h3><h4 id=sysvinit>SysVinit
<a class=anchor href=#sysvinit>#</a></h4><p>SysVinit uses the <code>/etc/inittab</code> file to set the default runlevel.</p><ol><li><p><strong>Open <code>/etc/inittab</code> for editing:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo nano /etc/inittab
</span></span></code></pre></div></li><li><p><strong>Set the default runlevel:</strong><br>Look for the line that starts with <code>id:</code> and set the desired runlevel. For example, to set the default runlevel to 3:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>id:3:initdefault:
</span></span></code></pre></div></li></ol><h4 id=systemd>Systemd
<a class=anchor href=#systemd>#</a></h4><p>Systemd uses targets instead of runlevels. The default target is typically a symbolic link to a target file.</p><ol><li><p><strong>View the current default target:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl get-default
</span></span></code></pre></div></li><li><p><strong>Set the default target:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl set-default multi-user.target
</span></span></code></pre></div></li></ol><h3 id=2-changing-runlevelsboot-targets>2. Changing Runlevels/Boot Targets
<a class=anchor href=#2-changing-runlevelsboot-targets>#</a></h3><h4 id=sysvinit-1>SysVinit
<a class=anchor href=#sysvinit-1>#</a></h4><ol><li><p><strong>Change to a different runlevel:</strong><br>Use the <code>init</code> or <code>telinit</code> command followed by the runlevel number. For example, to switch to runlevel 1 (single-user mode):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo init <span style=color:#ae81ff>1</span>
</span></span></code></pre></div></li></ol><h4 id=systemd-1>Systemd
<a class=anchor href=#systemd-1>#</a></h4><ol><li><p><strong>Change to a different target:</strong><br>Use the <code>systemctl isolate</code> command followed by the target name. For example, to switch to rescue mode (single-user mode):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl isolate rescue.target
</span></span></code></pre></div></li></ol><h3 id=3-shutting-down-and-rebooting>3. Shutting Down and Rebooting
<a class=anchor href=#3-shutting-down-and-rebooting>#</a></h3><h4 id=sysvinit-2>SysVinit
<a class=anchor href=#sysvinit-2>#</a></h4><ol><li><p><strong>Shutdown the system:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo shutdown -h now
</span></span></code></pre></div></li><li><p><strong>Reboot the system:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo shutdown -r now
</span></span></code></pre></div></li></ol><h4 id=systemd-2>Systemd
<a class=anchor href=#systemd-2>#</a></h4><ol><li><p><strong>Shutdown the system:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl poweroff
</span></span></code></pre></div></li><li><p><strong>Reboot the system:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl reboot
</span></span></code></pre></div></li></ol><h3 id=4-alerting-users-before-switching-runlevelsboot-targets>4. Alerting Users Before Switching Runlevels/Boot Targets
<a class=anchor href=#4-alerting-users-before-switching-runlevelsboot-targets>#</a></h3><ol><li><p><strong>Send a message to all logged-in users using <code>wall</code>:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo wall <span style=color:#e6db74>&#34;System will switch to single-user mode in 5 minutes. Please save your work.&#34;</span>
</span></span></code></pre></div></li></ol><h3 id=5-properly-terminating-processes>5. Properly Terminating Processes
<a class=anchor href=#5-properly-terminating-processes>#</a></h3><h4 id=sysvinit-3>SysVinit
<a class=anchor href=#sysvinit-3>#</a></h4><ol><li><p><strong>Gracefully terminate processes before changing runlevels:</strong><br>This is typically handled by the scripts in <code>/etc/init.d/</code>. For example, stopping the Apache service:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo /etc/init.d/apache2 stop
</span></span></code></pre></div></li></ol><h4 id=systemd-3>Systemd
<a class=anchor href=#systemd-3>#</a></h4><ol><li><p><strong>Stop a service before changing targets:</strong><br>Use <code>systemctl stop</code> followed by the service name. For example, stopping the Apache service:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl stop apache2
</span></span></code></pre></div></li></ol><h3 id=6-awareness-of-acpid>6. Awareness of <code>acpid</code>
<a class=anchor href=#6-awareness-of-acpid>#</a></h3><p><code>acpid</code> (Advanced Configuration and Power Interface Daemon) handles power-related events, such as closing a laptop lid or pressing a power button.</p><ol><li><p><strong>Check if <code>acpid</code> is installed and running:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl status acpid
</span></span></code></pre></div></li><li><p><strong>Install <code>acpid</code> if necessary:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get install acpid
</span></span></code></pre></div></li><li><p><strong>Start <code>acpid</code>:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl start acpid
</span></span></code></pre></div></li></ol><h3 id=key-files-terms-and-utilities>Key Files, Terms, and Utilities
<a class=anchor href=#key-files-terms-and-utilities>#</a></h3><ul><li><strong><code>/etc/inittab</code>:</strong> Configuration file for SysVinit to set default runlevel.</li><li><strong><code>shutdown</code>:</strong> Command to shutdown or reboot the system.</li><li><strong><code>init</code> and <code>telinit</code>:</strong> Commands to change runlevels in SysVinit.</li><li><strong><code>/etc/init.d/</code>:</strong> Directory containing init scripts for SysVinit.</li><li><strong><code>systemd</code> and <code>systemctl</code>:</strong> Tools for managing systemd services and targets.</li><li><strong><code>/etc/systemd/</code> and <code>/usr/lib/systemd/</code>:</strong> Directories containing systemd configuration and service files.</li><li><strong><code>wall</code>:</strong> Command to send messages to all logged-in users.</li></ul><p>By mastering these concepts and commands, you&rsquo;ll be well-prepared to manage runlevels and boot targets effectively, a crucial skill for passing the LPIC-1 exam.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#managing-runlevels-and-boot-targets-with-sysvinit-and-systemd>Managing Runlevels and Boot Targets with SysVinit and Systemd</a><ul><li><a href=#1-setting-the-default-runlevel-or-boot-target>1. Setting the Default Runlevel or Boot Target</a></li><li><a href=#2-changing-runlevelsboot-targets>2. Changing Runlevels/Boot Targets</a></li><li><a href=#3-shutting-down-and-rebooting>3. Shutting Down and Rebooting</a></li><li><a href=#4-alerting-users-before-switching-runlevelsboot-targets>4. Alerting Users Before Switching Runlevels/Boot Targets</a></li><li><a href=#5-properly-terminating-processes>5. Properly Terminating Processes</a></li><li><a href=#6-awareness-of-acpid>6. Awareness of <code>acpid</code></a></li><li><a href=#key-files-terms-and-utilities>Key Files, Terms, and Utilities</a></li></ul></li></ul></nav></div></aside></main></body></html>